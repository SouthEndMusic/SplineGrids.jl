var documenterSearchIndex = {"docs":
[{"location":"examples_dimensions/#Dimensionality-examples","page":"Dimensionality","title":"Dimensionality examples","text":"","category":"section"},{"location":"examples_dimensions/","page":"Dimensionality","title":"Dimensionality","text":"This page shows examples of spline grids of various dimensionalities via their plotting recipes.","category":"page"},{"location":"examples_dimensions/#1-input,-1-output","page":"Dimensionality","title":"1 input, 1 output","text":"","category":"section"},{"location":"examples_dimensions/","page":"Dimensionality","title":"Dimensionality","text":"using SplineGrids\nusing Plots\n\n# Spline grid parameters\nn_control_points = 10\ndegree = 3\nn_sample_points = 250\ndim_out = 1\n\n# Define spline grid\nspline_dimension = SplineDimension(n_control_points, degree, n_sample_points, extent=(3.0, 5.0))\nspline_grid = SplineGrid(spline_dimension, dim_out)\n\n# Set control points\nspline_grid.control_points .= [0.342, 0.633, 0.446, 0.716, 0.843, 0.171, 0.061, 0.973, 0.057, 0.671]\n\n# Evaluate spline grid\nevaluate!(spline_grid)\n\n# Plot\nplot(spline_grid)","category":"page"},{"location":"examples_dimensions/","page":"Dimensionality","title":"Dimensionality","text":"spline_grid","category":"page"},{"location":"examples_dimensions/#1-input,-2-outputs","page":"Dimensionality","title":"1 input, 2 outputs","text":"","category":"section"},{"location":"examples_dimensions/","page":"Dimensionality","title":"Dimensionality","text":"# Spline grid parameters\nn_control_points = 10\ndegree = 2\nn_sample_points = 250\ndim_out = 2\n\n# Define spline grid\nspline_dimension = SplineDimension(n_control_points, degree, n_sample_points)\nspline_grid = SplineGrid(spline_dimension, dim_out)\n\n# Set control points\nr = 1:n_control_points\nθ = 1:n_control_points\nspline_grid.control_points[:, 1] .= @. r * cos(θ)\nspline_grid.control_points[:, 2] .= @. r * sin(θ)\n\n# Evaluate spline grid\nevaluate!(spline_grid)\n\n# Plot\nplot(spline_grid)","category":"page"},{"location":"examples_dimensions/","page":"Dimensionality","title":"Dimensionality","text":"spline_grid","category":"page"},{"location":"examples_dimensions/#1-input,-3-outputs","page":"Dimensionality","title":"1 input, 3 outputs","text":"","category":"section"},{"location":"examples_dimensions/","page":"Dimensionality","title":"Dimensionality","text":"# Spline grid parameters\nn_control_points = 10\ndegree = 2\nn_sample_points = 250\ndim_out = 3\n\n# Define spline grid\nspline_dimension = SplineDimension(n_control_points, degree, n_sample_points)\nspline_grid = SplineGrid(spline_dimension, dim_out)\n\n# Set control points\nr = 1:n_control_points\nθ = 1:n_control_points\nz = 1:n_control_points\nspline_grid.control_points[:, 1] .= @. r * cos(θ)\nspline_grid.control_points[:, 2] .= @. r * sin(θ)\nspline_grid.control_points[:, 3] .= z\n\n# Evaluate spline grid\nevaluate!(spline_grid)\n\n# Plot\nplot(spline_grid)","category":"page"},{"location":"examples_dimensions/","page":"Dimensionality","title":"Dimensionality","text":"spline_grid","category":"page"},{"location":"examples_dimensions/#1-input,-4-outputs","page":"Dimensionality","title":"1 input, 4 outputs","text":"","category":"section"},{"location":"examples_dimensions/","page":"Dimensionality","title":"Dimensionality","text":"# Spline grid parameters\nn_control_points = 10\ndegree = 2\nn_sample_points = 250\ndim_out = 4\n\n# Define spline grid\nspline_dimension = SplineDimension(n_control_points, degree, n_sample_points)\nspline_grid = SplineGrid(spline_dimension, dim_out)\n\n# Set control points\nr = 1:n_control_points\nθ = 1:n_control_points\nz = 1:n_control_points\nc = sin.(z)\nspline_grid.control_points[:, 1] .= @. r * cos(θ)\nspline_grid.control_points[:, 2] .= @. r * sin(θ)\nspline_grid.control_points[:, 3] .= z\nspline_grid.control_points[:, 4] .= c\n\n# Evaluate spline grid\nevaluate!(spline_grid)\n\n# Plot\nplot(spline_grid)","category":"page"},{"location":"examples_dimensions/","page":"Dimensionality","title":"Dimensionality","text":"spline_grid","category":"page"},{"location":"examples_dimensions/#2-inputs,-1-output","page":"Dimensionality","title":"2 inputs, 1 output","text":"","category":"section"},{"location":"examples_dimensions/","page":"Dimensionality","title":"Dimensionality","text":"# Spline grid parameters\nn_control_points = (5, 6)\ndegree = (2, 2)\nn_sample_points = (60, 50)\ndim_out = 1\n\n# Define spline grid\nspline_dimensions = SplineDimension.(n_control_points, degree, n_sample_points)\nspline_grid = SplineGrid(spline_dimensions, dim_out)\n\n# Set control points\nspline_grid.control_points .= 0\nspline_grid.control_points[1:2:end] .= 1:prod(n_control_points)/2\n\n# Evaluate spline grid \nevaluate!(spline_grid)\n\n# Plot\nplot(spline_grid)","category":"page"},{"location":"examples_dimensions/","page":"Dimensionality","title":"Dimensionality","text":"spline_grid","category":"page"},{"location":"examples_dimensions/#2-inputs,-2-outputs","page":"Dimensionality","title":"2 inputs, 2 outputs","text":"","category":"section"},{"location":"examples_dimensions/","page":"Dimensionality","title":"Dimensionality","text":"# Spline grid parameters\nn_control_points = (4, 4)\ndegree = (2, 3)\nn_sample_points = (15, 20)\ndim_out = 2\n\n# Define spline grid\nspline_dimensions = SplineDimension.(n_control_points, degree, n_sample_points)\nspline_grid = SplineGrid(spline_dimensions, dim_out)\n\n# Set control points\nspline_grid.control_points .= [-0.358 0.795 -0.016 -0.295; 0.923 -0.182 -0.644 0.612; -0.91 0.708 -0.426 0.412; 0.56 -0.78 0.515 0.676;;; 0.938 0.393 -0.702 -0.99; -0.578 0.305 -0.842 -0.57; 0.034 -0.813 -0.514 0.162; -0.016 -0.822 -0.261 -0.148]\n\n# Evaluate spline grid\nevaluate!(spline_grid)\n\n# plot\nplot(spline_grid)","category":"page"},{"location":"examples_dimensions/","page":"Dimensionality","title":"Dimensionality","text":"spline_grid","category":"page"},{"location":"examples_dimensions/#2-inputs,-3-outputs","page":"Dimensionality","title":"2 inputs, 3 outputs","text":"","category":"section"},{"location":"examples_dimensions/","page":"Dimensionality","title":"Dimensionality","text":"# Spline grid parameters\nn_control_points = (25, 2)\ndegree = (3, 1)\nn_sample_points = (100, 100)\ndim_out = 3\n\n# Define spline grid\nspline_dimension = SplineDimension.(n_control_points, degree, n_sample_points)\nspline_grid = SplineGrid(spline_dimension, dim_out)\n\n# Set control points\nR = 3\nr = 1\nρ = range(-r, r, length=n_control_points[2])\nfor (i, θ) in enumerate(range(0, 2π, length=n_control_points[1]))\n    ϕ = 2θ\n    spline_grid.control_points[i, :, 1] .= @. (R + ρ * cos(ϕ)) * cos(θ)\n    spline_grid.control_points[i, :, 2] .= @. (R + ρ * cos(ϕ)) * sin(θ)\n    spline_grid.control_points[i, :, 3] .= ρ * sin(ϕ)\nend\n\n# Evaluate spline grid\nevaluate!(spline_grid)\n\n# Plot\nplot(spline_grid)","category":"page"},{"location":"examples_dimensions/","page":"Dimensionality","title":"Dimensionality","text":"spline_grid","category":"page"},{"location":"manual/#Constructors","page":"Manual","title":"Constructors","text":"","category":"section"},{"location":"manual/","page":"Manual","title":"Manual","text":"KnotVector(::Integer, ::Integer)\nSplineDimension(::Integer, ::Integer, ::Integer)\nSplineGrid(::NTuple{N_in, <:SplineDimension}, ::Integer) where N_in","category":"page"},{"location":"manual/#SplineGrids.KnotVector-Tuple{Integer, Integer}","page":"Manual","title":"SplineGrids.KnotVector","text":"KnotVector(n_basis_functions::Integer, degree::Integer; extent::Tuple{Number, Number} = (0,1), distribution::Symbol = :equispaced)\n\nConstruct a clamped knot vector, i.e. the multiplicity of the first and last knot is degree + 1 and the other multiplicities are 1.\n\nArguments\n\nn_basis_functions: The number of basis functions that will be defined on this knot vector\ndegree: The degree of the basis functions that will be defined on this knot vector\n\nKeyword Arguments\n\nextent: A tuple (tmin, tmax) defining the extend of the knot vector\ndistribution: The distribution of the internal knots. The options are :equispaced or :random\n\n\n\n\n\n","category":"method"},{"location":"manual/#SplineGrids.SplineDimension-Tuple{Integer, Integer, Integer}","page":"Manual","title":"SplineGrids.SplineDimension","text":"SplineDimension(n_basis_functions::Integer, degree::Integer, n_sample_points::Integer; kwargs...)::SplineDimension\n\nConstructor for a SplineDimension. For now the sample points are evenly spaced on the extent of the knot vector. Key word arguments are passed to the KnotVector constructor.\n\n\n\n\n\n","category":"method"},{"location":"manual/#SplineGrids.SplineGrid-Union{Tuple{N_in}, Tuple{NTuple{N_in, var\"#s5\"} where var\"#s5\"<:SplineDimension, Integer}} where N_in","page":"Manual","title":"SplineGrids.SplineGrid","text":"SplineGrid(spline_dimensions::NTuple{N_in, <:SplineDimension}, dim_out::Integer)\n\nDefine a SplineGrid from an NTuple of spline dimensions and the number of output dimensions.\n\nInputs\n\nspline_dimensions: an NTuple of spline dimensions\nNout: The number of output dimensions. I.e. the control points and thus the spline live in ℝ^Nout.\n\n\n\n\n\n","category":"method"},{"location":"manual/#Evaluation","page":"Manual","title":"Evaluation","text":"","category":"section"},{"location":"manual/","page":"Manual","title":"Manual","text":"evaluate!(::SplineDimension)\nevaluate!(::SplineGrids.AbstractSplineGrid{Nin, Nout}) where {Nin, Nout}","category":"page"},{"location":"manual/#SplineGrids.evaluate!-Tuple{SplineDimension}","page":"Manual","title":"SplineGrids.evaluate!","text":"evaluate!(spline_dimension)\n\nPer sample point, get the value of the spline_dimension.degree + 1 basis functions that have a non-zero value for that sample point. This is based on the Cox-de Boor recursion formula.\n\nThe l-th sample point t has sample index i, meaning that t ∈ [tᵢ, tᵢ₊₁). Therefore Bᵢ₀(t) = 1, Bⱼ₀(t) = 0 for j ≠ i. For degree k, t is in the domain of Bⱼₖ which is [tⱼ, tⱼ₊ₖ₊₁), for j = i - k, ..., i.\n\nArguments\n\nspline_dimension\n\n\n\n\n\n","category":"method"},{"location":"manual/#SplineGrids.evaluate!-Union{Tuple{SplineGrids.AbstractSplineGrid{Nin, Nout}}, Tuple{Nout}, Tuple{Nin}} where {Nin, Nout}","page":"Manual","title":"SplineGrids.evaluate!","text":"evaluate!(spline_grid::SplineGrid)\n\nEvaluate the spline grid, that is: take the evaluated basis functions for each sample point for each SplineDimension, and compute the output grid on each sample point combination as a linear combination of control with basis function products as coefficients.\n\n\n\n\n\n","category":"method"},{"location":"manual/#Structs","page":"Manual","title":"Structs","text":"","category":"section"},{"location":"manual/","page":"Manual","title":"Manual","text":"KnotVector\nSplineDimension\nSplineGrid","category":"page"},{"location":"manual/#SplineGrids.KnotVector","page":"Manual","title":"SplineGrids.KnotVector","text":"KnotVector(knots, multiplicities)\n\nDefines a knot vector.\n\nArguments\n\nknot_values: The values in the knot vector. Must be strictly increasing.\nmultiplicities: The multiplicity of each knot in knots.\n\n\n\n\n\n","category":"type"},{"location":"manual/#SplineGrids.SplineDimension","page":"Manual","title":"SplineGrids.SplineDimension","text":"SplineDimension(degree, knot_vector, sample_points, sample_indices)\n\nDefines the set of basis functions for a single dimension, and how it is sampled.\n\nArguments\n\ndegree: The degree of the piecewise polynomial basis functions.\nmax_derivative_order: The maximum derivative order of the basis functions that will be computed.\nknot_vector: The knot vector on which the basis functions are defined.\nsample_points: The points in the domain of the basis functions where they are sampled. Must\nlie within the boundaries of the knot vector.\nsample_indices: The indices i of the sample points t in the knot vector such that knot_vector.knots[i] ≤ t < knot_vector.knots[i + 1]`\neval: An array of shape (length(sample_points), degree + 1, max_derivative + 1), with per sample point the values of those basis functions\neval_prev: Helper array for intermediate results in the basis function computations whose support the sample point is in, and the derivatives if requested.\n\n\n\n\n\n","category":"type"},{"location":"manual/#SplineGrids.SplineGrid","page":"Manual","title":"SplineGrids.SplineGrid","text":"The SplineGrid is the central object of the SplineGrids.jl package, containing all information to evaluate the defined spline on the defined grid.\n\nFields\n\nspline_dimensions: A SplineDimension per dimension of the spline, containing data to evaluate basis functions.\nsample_indices: For each global sample point, the linear index in the control_points array before it is offset for a particular index in the control point kernel and output dimension.\ncontrol points: The points that define the shape of the spline, and in how many dimensions it is embedded.\nweights: For now unsupported, will eventually be used to define NURBS.\neval: The array where the evaluated spline grid is stored.\nbasis_function_products: An array of intermediate results for evaluating the spline grids, containing products of basis functions from the various spline dimensions.\n\n\n\n\n\n","category":"type"},{"location":"manual/#Utility-functions","page":"Manual","title":"Utility functions","text":"","category":"section"},{"location":"manual/","page":"Manual","title":"Manual","text":"decompress","category":"page"},{"location":"manual/#SplineGrids.decompress","page":"Manual","title":"SplineGrids.decompress","text":"Transform spline_dimension.eval into a matrix of shape (n_sample_points, n_points - degree - 1) which explicitly gives the value for each basis function at each sample point.\n\n\n\n\n\n","category":"function"},{"location":"examples_derivatives/#Derivatives-example","page":"Derivatives","title":"Derivatives example","text":"","category":"section"},{"location":"examples_derivatives/","page":"Derivatives","title":"Derivatives","text":"The code below shows an example of how derivatives can be used to compute the normal vectors of a surface.","category":"page"},{"location":"examples_derivatives/#Defining-the-surface","page":"Derivatives","title":"Defining the surface","text":"","category":"section"},{"location":"examples_derivatives/","page":"Derivatives","title":"Derivatives","text":"using SplineGrids\n\n# Spline Grid Parameters\nn_control_points = (5, 5)\ndegree = (2, 2)\nn_sample_points = (100, 100)\nNout = 3\nmax_derivative_order = 1\n\n# Define the spline grid\nspline_dimensions = SplineDimension.(n_control_points, degree, n_sample_points; max_derivative_order)\nspline_grid = SplineGrid(spline_dimensions, Nout)\nfor i in 1:n_control_points[1]\n    for j in 1:n_control_points[2]\n        spline_grid.control_points[i, j, 3] = exp(-((i - 3)^2 + (j - 3)^2))\n    end\nend","category":"page"},{"location":"examples_derivatives/#Inspecting-the-basis-functions","page":"Derivatives","title":"Inspecting the basis functions","text":"","category":"section"},{"location":"examples_derivatives/","page":"Derivatives","title":"Derivatives","text":"Let's look at the basis functions for the first dimension:","category":"page"},{"location":"examples_derivatives/","page":"Derivatives","title":"Derivatives","text":"using Plots\n\nplot(spline_dimensions[1])","category":"page"},{"location":"examples_derivatives/","page":"Derivatives","title":"Derivatives","text":"and the derivatives of these basis functions:","category":"page"},{"location":"examples_derivatives/","page":"Derivatives","title":"Derivatives","text":"using Plots\n\nplot(spline_dimensions[1]; derivative_order = 1)","category":"page"},{"location":"examples_derivatives/#Evaluating-the-surface","page":"Derivatives","title":"Evaluating the surface","text":"","category":"section"},{"location":"examples_derivatives/","page":"Derivatives","title":"Derivatives","text":"The data is copied because spline_grid.eval will be overwritten below when computing the partial derivatives.","category":"page"},{"location":"examples_derivatives/","page":"Derivatives","title":"Derivatives","text":"evaluate!(spline_grid)\nspline_grid_data = copy(spline_grid.eval)\nnothing","category":"page"},{"location":"examples_derivatives/#Computing-the-partial-derivatives","page":"Derivatives","title":"Computing the partial derivatives","text":"","category":"section"},{"location":"examples_derivatives/","page":"Derivatives","title":"Derivatives","text":"# Derivatives of the surface with respect to the first dimension parameter\nevaluate!(spline_grid; derivative_order=(1, 0))\n∂₁spline_grid_data = copy(spline_grid.eval)\n\n# Derivatives of the surface with respect to the second dimension parameter\nevaluate!(spline_grid; derivative_order=(0, 1))\n∂₂spline_grid_data = spline_grid.eval\nnothing","category":"page"},{"location":"examples_derivatives/#Computing-the-normal-vectors","page":"Derivatives","title":"Computing the normal vectors","text":"","category":"section"},{"location":"examples_derivatives/","page":"Derivatives","title":"Derivatives","text":"using LinearAlgebra\n\nnormal_vectors = similar(spline_grid_data)\nfor i in 1:n_sample_points[1]\n    for j in 1:n_sample_points[2]\n        normal_vectors[i, j, :] .= cross(\n            view(∂₁spline_grid_data, i, j, :),\n            view(∂₂spline_grid_data, i, j, :)\n        )\n        normal_vectors[i, j, :] ./= 10 * norm(view(normal_vectors, i, j, :))\n    end\nend","category":"page"},{"location":"examples_derivatives/#Plotting","page":"Derivatives","title":"Plotting","text":"","category":"section"},{"location":"examples_derivatives/","page":"Derivatives","title":"Derivatives","text":"using CairoMakie\n\n# Plotting the surface\nf = Figure()\nax = Axis3(f[1, 1])\nCairoMakie.surface!(ax, eachslice(spline_grid_data, dims=3)...)\n\n# Plotting a subset of the normal vectors\nspline_grid_data_reshaped = reshape(spline_grid_data, (prod(n_sample_points), 3))\nnormal_vectors_reshaped = reshape(normal_vectors, (prod(n_sample_points), 3))\n\nCairoMakie.quiver!(\n    ax,\n    eachslice(view(spline_grid_data_reshaped, 1:192:prod(n_sample_points), :), dims=2)...,\n    eachslice(view(normal_vectors_reshaped, 1:192:prod(n_sample_points), :), dims=2)...,\n    arrowsize=0.03,\n)\n\nCairoMakie.xlims!(0, 1)\nCairoMakie.ylims!(0, 1)\n\nf","category":"page"},{"location":"#SplineGrids.jl","page":"SplineGrids.jl","title":"SplineGrids.jl","text":"","category":"section"}]
}
